# Enable PHP execution
AddHandler application/x-httpd-php .php

# Set default index
DirectoryIndex index.php routes.php

# Route all API requests to the handler
RewriteEngine On

# Route requests that start with /api/ to api_handler.php
RewriteCond %{REQUEST_URI} ^/api/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/(.*)$ api_handler.php [QSA,L]

# Route direct endpoint calls (without /api/ prefix) to routes.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)$ routes.php?request=$1 [QSA,L]